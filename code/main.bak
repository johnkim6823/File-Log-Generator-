from employee import Employee
from department import Department
from file import File
from behavior import Behavior

#LIB
import json


#======= Read Dept and Employees from JSON =======#
def read_from_json(json_file_path):
    print("==============================")    
    print("1. Read DEPT/EMPLOYEE data from JSON")

    # Load JSON data
    with open(json_file_path, 'r') as file:
        data = json.load(file)
        departments = {}

        for dept_name, employees in data.items():
            department = Department(dept_name)
            for emp_data in employees:
                employee = Employee(emp_data['name'], emp_data['rank'], department)
                department.add_employee(employee)
            departments[dept_name] = department

        return departments
    
    print("Done")
    print("==============================")   
    return departments

#======= Print Employees by department =======#
def print_employees_by_department(departments):
    print("==============================")    
    print("2. Print Dept and Employees")
    print("==============================")    
    for dept_name, department in departments.items():
        print(f"=== {dept_name} Dept's Employee List ===")
        for employee in department.employees:
            print(f"- {employee.name} grade: {employee.rank}")
    print("==============================")   


def main():
    #1 prerequisite
    json_file_path = './department_data.json'  # Update this path to the actual file location
    department = read_from_json(json_file_path)


    #2 Print Dept / Employees
    print_employees_by_department(department)


# 프로그램 실행
if __name__ == "__main__":
    main()
